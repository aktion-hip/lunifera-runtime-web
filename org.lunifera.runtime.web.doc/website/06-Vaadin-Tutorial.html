<br style="clear:both;height:1em;">
	<div id="leftcol">
		<div class="nav-logo">
			<a href="index.php"><img src="logo.png" style="margin-left:10px; width:155px"/></a>
		</div>
		<ul id="leftnav">
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="01-Introduction.php">Overview</a></div>
		<ul style="display: none;" id="subToc_01-Introduction.html">
		<li id="01-Introduction.html#_Content.html" ><a href="01-Introduction.php#_Content.php" >Content</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="03-Jetty-Service.php">IJetty-Service</a></div>
		<ul style="display: none;" id="subToc_03-Jetty-Service.html">
		<li id="03-Jetty-Service.html#_Overview.html" ><a href="03-Jetty-Service.php#_Overview.php" >Overview</a></li>
		<li id="03-Jetty-Service.html#_Properties.html" ><a href="03-Jetty-Service.php#_Properties.php" >Properties</a></li>
		<li id="03-Jetty-Service.html#_CodeSamples.html" ><a href="03-Jetty-Service.php#_CodeSamples.php" >Code sampels</a></li>
		<li id="03-Jetty-Service.html#_consoleCommands.html" ><a href="03-Jetty-Service.php#_consoleCommands.php" >Console commands</a></li>
		<li id="03-Jetty-Service.html#_Query.html" ><a href="03-Jetty-Service.php#_Query.php" >Query jetty services</a></li>
		<li id="03-Jetty-Service.html#_startStop.html" ><a href="03-Jetty-Service.php#_startStop.php" >Start and stop jetty services</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="04-Http-Application.php">Http Application</a></div>
		<ul style="display: none;" id="subToc_04-Http-Application.html">
		<li id="04-Http-Application.html#_Overview.html" ><a href="04-Http-Application.php#_Overview.php" >Overview</a></li>
		<li id="04-Http-Application.html#_Properties.html" ><a href="04-Http-Application.php#_Properties.php" >Properties</a></li>
		<li id="04-Http-Application.html#_ServletContext.html" ><a href="04-Http-Application.php#_ServletContext.php" >ServletContext</a></li>
		<li id="04-Http-Application.html#_HttpService.html" ><a href="04-Http-Application.php#_HttpService.php" >HttpService</a></li>
		<li id="04-Http-Application.html#_CodeSamples.html" ><a href="04-Http-Application.php#_CodeSamples.php" >Code sampels</a></li>
		<li id="04-Http-Application.html#_consoleCommands.html" ><a href="04-Http-Application.php#_consoleCommands.php" >Console commands</a></li>
		<li id="04-Http-Application.html#_QueryHttp.html" ><a href="04-Http-Application.php#_QueryHttp.php" >Query Http-applications</a></li>
		<li id="04-Http-Application.html#_QueryHandlerProvider.html" ><a href="04-Http-Application.php#_QueryHandlerProvider.php" >Query Handler-Provider</a></li>
		<li id="04-Http-Application.html#_QueryHttpServices.html" ><a href="04-Http-Application.php#_QueryHttpServices.php" >Query HttpServices</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="05-Vaadin-Application.php">Vaadin Application</a></div>
		<ul style="display: none;" id="subToc_05-Vaadin-Application.html">
		<li id="05-Vaadin-Application.html#_Overview.html" ><a href="05-Vaadin-Application.php#_Overview.php" >Overview</a></li>
		<li id="05-Vaadin-Application.html#_Properties.html" ><a href="05-Vaadin-Application.php#_Properties.php" >Properties</a></li>
		<li id="05-Vaadin-Application.html#_CodeSamples.html" ><a href="05-Vaadin-Application.php#_CodeSamples.php" >Code sampels</a></li>
		<li id="05-Vaadin-Application.html#_consoleCommands.html" ><a href="05-Vaadin-Application.php#_consoleCommands.php" >Console commands</a></li>
		<li id="05-Vaadin-Application.html#_QueryHttp.html" ><a href="05-Vaadin-Application.php#_QueryHttp.php" >Query Vaadin-Applications</a></li>
		<li id="05-Vaadin-Application.html#_IVaadinApplication.html" ><a href="05-Vaadin-Application.php#_IVaadinApplication.php" >Vaadin-Appplication-service</a></li>
		</ul>
		</li>
		<li class="separator"><div class="separator">
		<img src="triangle.gif" style="height:12px; margin-right: 2px; "  /><img src="triangle-90.gif" style="display:none; margin-right: 2px" height="12px" />
		<a href="06-Vaadin-Tutorial.php">Vaadin - Your own application</a></div>
		<ul style="display: none;" id="subToc_06-Vaadin-Tutorial.html">
		<li id="06-Vaadin-Tutorial.html#_VaadinApplicationBundle.html" ><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle.php" >Application Bundle</a></li>
		<li id="06-Vaadin-Tutorial.html#_VaadinApplicationBundle_Configure.html" ><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_Configure.php" >Configure Applications</a></li>
		</ul>
		</li>
		</ul>
	</div>
	<div id="midcolumn">
		<a name="VaadinTutorial" ></a>
		<h1>Vaadin - Your own application</h1>
				<div class="toc">
				  <ul>
				    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle.php" >Application Bundle</a></li>
				    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_Configure.php" >Configure Applications</a></li>
				  </ul>
				</div>
				
		<p>
		This tutorial demos how you can create your own vaadin application. If you are looking for code samples
		just take a look at the <a href="https://github.com/lunifera/lunifera-examples/tree/master/runtime-web" >example repo</a>.
		</p>
		<p>
		To create you own application you have to create two different bundles.
		<ul>
		  <li><span class="inlinecode">Application-bundle</span> - A bundle that contains the implementation of <abbr title="com.vaadin.ui.UI" >com.vaadin.ui.UI</abbr> which is the main entry point. (See <a href="05-Vaadin-Application.php#_IVaadinApplication.php" title="Go to &quot;Vaadin-Appplication-service&quot;">UiProvider</a>)</li>
		  <li><span class="inlinecode">WidgetSet-bundle</span> -And another bundle providing the widgetset used by vaadin at client side. </li>
		</ul>
		</p>
		<a name="_VaadinApplicationBundle" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Application Bundle</h1>
			<div class="toc">
			  <ul>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_5.php" >Finished bundle</a></li>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_6.php" >Prepare bundle</a></li>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_7.php" >Create UI class</a></li>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_8.php" >Create OSGi-Component-Factory</a></li>
			  </ul>
			</div>
			<p>
			The application bundle is used to provide an instance of <abbr title="com.vaadin.ui.UI" >com.vaadin.ui.UI</abbr>
			to the vaadin core. Vaadin will use it as an abstraction for a browser tab and will render all contained
			UI elements on it. So the UI-instance is the very central element to deal with.
			</p>
			<p>
			Since lunifera.org is based on OSGi the UI-instances will be created by a ComponentFactory. Using that
			way of instantiating new objects allows the use of the whiteboard pattern. Whiteboard
			pattern means, that OSGi-services can become injected automatically into the UI-instance by OSGi-DS (Declarative
			services).  
			</p>
			<p>
			The application also has to route the vaadin application. This should mean, that it has to define which
			webapplication should be used to run the vaadin application. (Detailed information according lunifera HttpApplication
			can be found here: <a href="04-Http-Application.php" title="Go to &quot;Http Application&quot;" >section HttpApplication</a>)
			</p>
			<p>
			Now lets start implementing our first example.
			This section demos the steps to prepare the application bundle.
			</p>
			<a name="_VaadinApplicationBundle_5" ></a>
			<h2>Finished bundle</h2>
			<p>
			<div class="image" >
			<a class="gallery" rel="prettyPhoto[all]" title="Image 1: Finished bundle" href="images/VaadinStandaloneExample_1.png">
				<img src="images/VaadinStandaloneExample_1.png" 
					class="img-small" 
				/>
			</a>
			<div class="caption">
				Image 1: Finished bundle
			</div>
			</div>
			</p>
			<p>
			This image shows the structure of the finished bundle.
			</p>
			<a name="_VaadinApplicationBundle_6" ></a>
			<h2>Prepare bundle</h2>
			<p>
			Use eclipse to create a plugin project like <span class="inlinecode">org.lunifera.examples.runtime.web.vaadin.standalone</span>. You do not need an activator since we are using declarative services.
			</p>
			<p>
			Open MANIFEST.MF and add following entries
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						Bundle-Version:&nbsp;0.0.1.qualifier<br/>
						Service-Component:&nbsp;OSGI-INF/*.xml<br/>
						Import-Package:&nbsp;org.osgi.service.component;version="1.2.0"<br/>
						Require-Bundle:&nbsp;javax.servlet;bundle-version="3.0.0",<br/>
						&nbsp;com.vaadin.shared;bundle-version="7.0.0",<br/>
						&nbsp;com.vaadin.server;bundle-version="7.0.0",<br/>
						&nbsp;org.json;bundle-version="1.0.0",<br/>
						&nbsp;org.lunifera.dependencies.bundle.vaadin.addon.icepush;bundle-version="0.5.5",<br/>
						&nbsp;org.lunifera.runtime.web.vaadin.osgi;bundle-version="0.0.1",<br/>
						&nbsp;org.lunifera.runtime.common;bundle-version="0.0.1"<br/>
						Bundle-ActivationPolicy:&nbsp;lazy<br/>
						Lunifera-Config:&nbsp;config
					</p>
				</div>
			</div>
			</p>
			<a name="_VaadinApplicationBundle_7" ></a>
			<h2>Create UI class</h2>
			<p>
			Create your UI-class. This will be the entry point for your UI-code. 
			</p>
			<p>
			And add following code to the class.
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						@Theme(Reindeer.THEME_NAME)<br/>
						public&nbsp;class&nbsp;Vaadin7StandaloneDemoUI&nbsp;extends&nbsp;OSGiUI&nbsp;{<br/>
						<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;@Override<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;init(VaadinRequest&nbsp;request)&nbsp;{<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;your&nbsp;UI&nbsp;code&nbsp;will&nbsp;be&nbsp;placed&nbsp;here&nbsp;later<br/>
						</span>&nbsp;&nbsp;&nbsp;&nbsp;}
					</p>
				</div>
			</div>
			</p>
			<p>
			Now we have prepared a bundle that contains a working definition of <span class="inlinecode">com.vaadin.ui.UI</span>. As you can
			see, we are extending an OSGiyfied version called <span class="inlinecode">OSGiUI</span>. 
			</p>
			<a name="_VaadinApplicationBundle_8" ></a>
			<h2>Create OSGi-Component-Factory</h2>
			<p>
			The main problem for now is, that the <span class="inlinecode">Vaadin-OSGi-Bridge</span> is not aware about our <span class="inlinecode">Vaadin7StandaloneDemoUI</span>.
			So we are using OSGi-DS (Declarative OSGi-service) to register that class at the bridge.
			</p>
			<p>
			Create a folder OSGI-INF in your bundle and add a file called vaadinUI.xml. 
			</p>
			<p>
			Then paste following code into it and replace <span class="inlinecode">org.lunifera.examples.runtime.web.vaadin.standalone.Vaadin7StandaloneDemoUI</span>
			by the UI-Classname of your example. Also change the name of the service.
			</p>
			<p>
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						&lt;?xml&nbsp;version=<span class="string">"1.0"</span>&nbsp;encoding=<span class="string">"UTF-8"</span>?&gt;<br/>
						&lt;scr:component&nbsp;xmlns:scr=<span class="string">"http://www.osgi.org/xmlns/scr/v1.1.0"</span>&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;factory=<span class="string">"org.lunifera.web.vaadin.UI/org.lunifera.examples.runtime.web.vaadin.standalone.Vaadin7StandaloneDemoUI@VaadinDemo-VaadinApplication"</span>&nbsp;<br/>
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;immediate=<span class="string">"false"</span>&nbsp;name=<span class="string">"org.lunifera.examples.runtime.web.vaadin.standalone.ui"</span>&gt;<br/>
						&nbsp;&nbsp;&nbsp;&lt;implementation&nbsp;class=<span class="string">"org.lunifera.examples.runtime.web.vaadin.standalone.Vaadin7StandaloneDemoUI"</span>/&gt;<br/>
						&lt;/scr:component&gt;
					</p>
				</div>
			</div>
			</p>
			<p>
			<span class="inlinecode">org.lunifera.web.vaadin.UI/org.lunifera.examples.runtime.web.vaadin.standalone.Vaadin7StandaloneDemoUI@VaadinDemo-VaadinApplication</span>
			uses following structure.
			</p>
			<p>
			<ul>
			  <li><span class="inlinecode">org.lunifera.web.vaadin.UI</span> - Used by OSGi to find the factory.</li>
			  <li>/</li>
			  <li><span class="inlinecode">org.lunifera.examples.runtime.web.vaadin.standalone.Vaadin7StandaloneDemoUI</span> - The name of the
			  UI class as workaround since no properties can be passed into a component factory. Vaadin need the UI-class
			  in the UIProvider.</li>
			  <li>@</li>
			  <li><span class="inlinecode">VaadinDemo-VaadinApplication</span> - The name of the vaadin application this UI should be used
			  with. Can be empty.</li>
			</ul>
			</p>
			<p>
			A detailed description about the service definition can be found here <a href="05-Vaadin-Application.php#_IVaadinApplication.php" title="Go to &quot;Vaadin-Appplication-service&quot;" >section _IVaadinApplication</a>.
			</p>
			<p>
			Now the <span class="inlinecode">Vaadin-OSGi-Bridge</span> is aware about the UI-class and got the capability to instantiate it
			by the ComponentFactory.
			</p>
		<a name="_VaadinApplicationBundle_Configure" ></a>
		<span style="float:left; border-top: 1px dotted #d4d4dd; margin-left: 0; margin-top: 5px;
			padding: 5px 0;
			padding-top: 5px;"></span><a style="float: right" href="#">Top</a>
			<br style="clear:both"></br>
			<h1>Configure Applications</h1>
			<div class="toc">
			  <ul>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_Configure_4.php" >Configure Jetty</a></li>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_Configure_5.php" >Configure HttpApplication</a></li>
			    <li><a href="06-Vaadin-Tutorial.php#_VaadinApplicationBundle_Configure_6.php" >Configure VaadinApplication</a></li>
			  </ul>
			</div>
			<p>
			In order to use the UI-class we have to define...
			<ul>
			  <li>A VaadinApplication that provides the UI-class to vaadin core.</li>
			  <li>A HttpApplication which is an abstraction above a servlet context. Each HttpApplication has its
			  very own contextPath. A HttpApplication can run exactly one VaadinApplication.</li>
			  <li>A JettyServer instance. Each jetty server can run many HttpApplications.</li>
			</ul>
			</p>
			<p>
			Therefore we are using <abbr title="org.lunifera.runtime.component.configuration.manager.service.IConfigurationService" >ConfigurationService</abbr>.
			This service reads properties from a file and pass them to the OSGi Configuration Admin.
			</p>
			<p>
			Detailed information about <abbr title="org.lunifera.runtime.component.configuration.manager.service.IConfigurationService" >ConfigurationService</abbr>
			is under construction. 
			</p>
			<a name="_VaadinApplicationBundle_Configure_4" ></a>
			<h2>Configure Jetty</h2>
			<p>
			Create a folder called config in the bundle and place a file called <span class="inlinecode">lunifera.jetty.server.factory_Vaadin1.cfg</span> there.
			</p>
			<p>
			Paste following code in there
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						#&nbsp;configuration&nbsp;to&nbsp;start&nbsp;a&nbsp;jetty&nbsp;server<br/>
						lunifera.jetty.name=VaadinDemo-Server<br/>
						lunifera.jetty.http.port=8080
					</p>
				</div>
			</div>
			</p>
			<p>
			Further information about jetty see <a href="01-Introduction.php#_JettyService.php" title="Go to &quot;Jetty Services&quot;" >section _JettyService</a> and <a href="03-Jetty-Service.php" title="Go to &quot;IJetty-Service&quot;" >section JettyService</a>
			</p>
			<a name="_VaadinApplicationBundle_Configure_5" ></a>
			<h2>Configure HttpApplication</h2>
			<p>
			To configure a HttpApplication (abstraction of servlet context) we also use the <abbr title="org.lunifera.runtime.component.configuration.manager.service.IConfigurationService" >ConfigurationService</abbr>. Place a file called <span class="inlinecode">lunifera.http.application.factory_Vaadin1.cfg</span> there.
			</p>
			<p>
			Paste following code in there
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						#&nbsp;configuration&nbsp;to&nbsp;start&nbsp;a&nbsp;vaadin&nbsp;service<br/>
						lunifera.http.name=VaadinDemo-HttpApplication<br/>
						lunifera.http.contextPath=/<br/>
						lunifera.jetty.name=VaadinDemo-Server
					</p>
				</div>
			</div>
			</p>
			<p>
			Further information about jetty see <a href="01-Introduction.php#_HttpApplication.php" title="Go to &quot;Http Applications&quot;" >section _HttpApplication</a> and <a href="04-Http-Application.php" title="Go to &quot;Http Application&quot;" >section HttpApplication</a>
			</p>
			<a name="_VaadinApplicationBundle_Configure_6" ></a>
			<h2>Configure VaadinApplication</h2>
			<p>
			To configure jetty we also use the <abbr title="org.lunifera.runtime.component.configuration.manager.service.IConfigurationService" >ConfigurationService</abbr>. Place a file called <span class="inlinecode">lunifera.vaadin.application.factory_Vaadin1.cfg</span> there.
			</p>
			<p>
			Paste following code in there
			<div class="literallayout">
				<div class="incode">
					<p class="code">
						#&nbsp;configuration&nbsp;to&nbsp;start&nbsp;a&nbsp;vaadin&nbsp;service<br/>
						lunifera.web.vaadin.name=VaadinDemo-VaadinApplication<br/>
						lunifera.web.vaadin.uialias=demo<br/>
						lunifera.web.vaadin.widgetset=org.lunifera.examples.runtime.web.vaadin.standalone.widgetset.Widgetset<br/>
						lunifera.http.name=VaadinDemo-HttpApplication
					</p>
				</div>
			</div>
			</p>
			<p>
			Further information about jetty see <a href="01-Introduction.php#_VaadinApplication.php" title="Go to &quot;Vaadin Applications&quot;" >section _VaadinApplication</a> and <a href="05-Vaadin-Application.php" title="Go to &quot;Vaadin Application&quot;" >section VaadinApplication</a>
			</p>
		<div id="disqus_thread"></div>
		<script type="text/javascript" src="documentationRoot.js"></script>
		<script type="text/javascript">
		    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		    var disqus_shortname = 'xtext'; // required: replace example with your forum shortname
		
		    // The following are highly recommended additional parameters. Remove the slashes in front to use.
		    var disqus_identifier = 'VaadinTutorial';
		    var disqus_url = documentationRoot+'06-Vaadin-Tutorial.php';
		
		    /* * * DON'T EDIT BELOW THIS LINE * * */
		    (function() {
		        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		    })();
		</script>
 		<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	</div>
	<br style="clear:both;height:1em;">
